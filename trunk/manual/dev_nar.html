<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="index,follow">
<meta name="author" content="UKADOC Project">
<meta name="keywords" content="ukadoc,伺か,配布">
<link rel="stylesheet" href="style.css" type="text/css">
<base target="_blank">
<title>UKADOC Project 配布用ファイルを作る</title>
</head>
<body>



<div class="baseflame">
	<h1 class="head">
		<iframe height="160" width="750" frameborder="0" marginheight="1" marginwidth="1" scrolling="no" src="navigation.html" name="navigation">
			UKADOC Project(Powered by Disc-2)
		</iframe>
	</h1>
	<div class="body">
		<div class="sidebar">
			<iframe height="1100" width="200" frameborder="0" marginheight="1" marginwidth="1" scrolling="no" src="sidemenu.html" name="sidemenu"></iframe>
		</div>
		<div class="text">
			<h2>配布用ファイルを作る</h2>
			<div class="chapter">
				<div class="section">
					<p>ゴーストのアーカイブはD&amp;Dインストールできるzipもしくはnarファイルが一般的です。</p>
					<p>lzhでもインストールは可能ですが理由がない限りはzip、narにしてください。</p>	
				</div>
			</div>
			<div class="chapter">
				<h3>1、ゴーストの更新用情報を作る</h3>
				<div class="section">
					<p>まずは自分のゴーストデータを全てをコピーし、下記のものを削除してください。</p>
				</div>
				<ul>
					<li>各種セーブデータファイル(初期値が必要なものだけ含めてください)</li>
					<li>全てのprofileフォルダ(ghost、shell内)</li>
					<li>ディレクトリ直下の<em>profile.txt</em></li>
				</ul>
				<div class="section">
					<p>次にコピーしたディレクトリの一番上に空のテキストで<em>updates2.dau</em>を作ります。</p>
					<p>※この時ゴーストのmasterフォルダに<em>updates2.dau</em>は必要ありません。</p>
				</div>
				<div class="section">
					<p>そしてMATERIA、SSP等の本体を起動し、<em>updates2.dau</em>や更新したいファイルの入ったフォルダを本体にドロップします。</p>
					<p>この時、<em>install.txt</em>が入ってるとそちらが優先されnarファイルができてしまうので含めないでください。</p>
				</div>
				<div class="section">
					<em>updates2.dau</em>が作成できたら中身を確認してみてください。
				</div>
			</div>
			<div class="chapter">
				<h3>2、ゴーストのnarファイルを作成する</h3>
				<div class="section">
					<p>ディレクトリ直下に<em>install.txt</em>というファイルを作ります。</p>
					<p>下記の内容をコピーして<em>install.txt</em>に貼り付けゴースト名等を適切に変更してください。</p>
				</div>
				<div class="section">
<pre class="exmp-descript2">
charset,Shift_JIS
type,ghost
name,ゴースト名
directory,ゴーストのフォルダ名(英数で)
</pre>
				</div>
				<div class="section">
					<p>また、下記の記述を含めると特殊なインストールをします。</p>
				</div>
				<div class="section">
<pre class="exmp-descript2">
refresh,1
</pre>
					<p>インストールされるフォルダにすでにファイルがあった場合は全て削除してからリフレッシュインストールします。</p>
					<p>構成を変えたりして上書きしていらないファイルが残ってしまう場合などに使います。</p>
					<p>セーブデータ等も消えてしまうので注意してください。</p>
				</div>
				<div class="section">
<pre class="exmp-descript2">
refreshundeletemask,save1.txt:save2.txt
</pre>
					<p>リフレッシュインストールの際に残しておきたいファイルを指定します。</p>
					<p>ファイル名のみでパスは含みません。</p>
					<p>:で区切る事によっていくつでもマスクできます。</p>
				</div>
				<div class="section">
<pre class="exmp-descript2">
balloon.directory,バルーンフォルダ名
</pre>
					<p>一緒にバルーンを同梱しインストールできます。</p>
				</div>
				<div class="section">
<pre>
　　　-myghost
　　　　　+-ghost
　　　　　+-shell
　　　　　<em>+-balloon(バルーンフォルダ名)</em>
</pre>
					<p>の位置に同梱するバルーンを配置してください。</p>
					<p>インストールされればballoonフォルダの方に配置されます。</p>
					<p>バルーンはネットワーク更新できないので<em>updates2.dau</em>作成の際に含めないようにしてください。</p>
				</div>
				<div class="section">
					<p>全て記述し終わりフォルダごと本体にドロップするとフォルダ名のnarファイルが作成されます。</p>
				</div>
			</div>
			<div class="chapter">
				<h3>3、その他のnarファイルを作成する</h3>
				<div class="section">
					<p>ゴーストの追加ファイル用アーカイブを作る時は</p>
<pre class="exmp-descript2">
charset,Shift_JIS
type,supplement
name,内容
accept,受け取るゴーストの本体側（\0,sakura）名
</pre>
					<p>とします。</p>
					<p>この場合、指定されたゴーストでなければインストールできません。</p>
					<p>ファイルの階層構成は普通のゴーストのnarファイルと同じです。</p>
				</div>
				<div class="section">
					バルーンを単体でインストールさせるには、<br>typeの部分を
<pre class="exmp-descript2">
type,balloon
</pre>
					にします。
				</div>
				<div class="section">
					<p>ゴーストと同じようにフォルダごと本体にドロップして作成してください。</p>
					<p>refreshも使えます。</p>
				</div>
				<div class="section">
					シェルをインストールさせるには<br>
<pre class="exmp-descript2">
charset,Shift_JIS
type,shell
name,シェル名
accept,受け取るゴースト名
directory,シェルのディレクトリ名
</pre>
					にします。
				</div>
				<div class="section">
					<p>ゴーストと同じようにフォルダごと本体にドロップして作成してください。</p>
					<p>指定されたゴーストのshellフォルダにインストールされます。</p>
					<p>受け取るゴーストに指定されたゴーストでなければインストールできません。</p>
					<p>refreshも使えます。</p>
				</div>
			</div>
			<div class="chapter">
				<h3>4、アーカイブにバルーンなどを同梱する</h3>
				<div class="section">
					<p>以下のようなファイルの配置を考えます。</p>
<pre>
　　-myghost
　　-install.txt
　　　　<em>-install.txt</em>
　　　　+-ghost
　　　　+-shell
　　　　<em>-myballoon</em>
　　　　　　-descript.txt
　　　　　　-balloons0.png
　　　　　　:
　　　　　　:
</pre>
				</div>
				<div class="section">
					<p>この時install.txtを以下のように書けば、ゴーストと同時にバルーンのインストールができます。</p>
<pre class="exmp-descript2">
charset,Shift_JIS
type,ghost
name,ゴースト名
directory,ゴーストのフォルダ名(英数で)
<em>balloon.directory,myballoon</em>（※バルーンのフォルダ名。英数）
</pre>
					<p>この場合balloon側にinstall.txtは不要です<br>※あっても無視されます。単独配布を見越して入れておいても大丈夫。</p>
				</div>
				<div class="section">
					<p>また、もし設置後のバルーンフォルダ名と、配布時のフォルダ名が異なる場合は以下のようにします。</p>
<pre class="exmp-descript2">
charset,Shift_JIS
type,ghost
name,ゴースト名
directory,ゴーストのフォルダ名(英数で)
balloon.directory,<em>hoge_balloon</em>（※設置後のバルーンフォルダ名。英数）
<em>balloon.source.directory,myballoon</em>（※配布時のバルーンフォルダ名。英数）
</pre>
					<p>これで上例のmyballoonというバルーンのフォルダは、<br>実際のインストール後にはhoge_balloonというフォルダ名になります。</p>
				</div>
				<div class="section">
					<p>同梱するファイルについてのrefreshの設定は以下のようにします。</p>
<pre class="exmp-descript2">
balloon.refresh,1
balloon.refreshundeletemask,hoge.png:huga.txt:...
</pre>
				</div>
				<div class="section">
					<p>なお、同様の同梱はballoon以外にheadlineとpluginについて可能です。</p>
					<p>インストールの主体側も、ghost以外にshellについて同様に同梱の設定ができます。</p>
				</div>
			</div>
			<div class="chapter">
				<h3 id="package">5、複数インストール用パッケージを作る</h3>
				<div class="section">
					<p>この方法はSSP専用となっています。</p>
				</div>
				<div class="section">
<pre class="exmp-descript2">
charset,Shift_JIS
type,package
name,内容
</pre>
					<p>とすると、複数インストール用パッケージを作ることができます。</p>
				</div>
				<div class="section">
					<p>その際、中のファイルの配置は以下のようにします。</p>
<pre>
　　-mypackage
　　-install.txt (package用)
　　　　<em>-myghost1</em>
　　　　　　<em>-install.txt (myghost1用)</em>
　　　　　　<em>+-ghost</em>
　　　　　　<em>+-shell</em>
　　　　<em>-myghost2</em>
　　　　　　<em>-install.txt (myghost2用)</em>
　　　　　　<em>+-ghost</em>
　　　　　　<em>+-shell</em>
</pre>
				</div>
				<div class="section">
					<p>直下のinstall.txtはtype,packageとnameが書かれたのみのもので、それ以下の各フォルダにそれぞれ単独でも機能するインストール構造を作ります。</p>
					<p>単純にインストールするファイルの配置が多段になっただけと考えるとわかりやすいです。</p>
					<p>なお、インストールで認識可能なものならなんでも複数パックにできます。</p>
				</div>
			</div>
			<div class="chapter">
				<h3>6、ツールでもっと楽にファイルを作る</h3>
				<div class="section">
					<p>以下のようなツールを使えば、面倒なファイルの選別やFTPアップロードを自動化できます。</p>
					<p>また、必要ファイルの選別や<em>updates2.dau</em>の更新をしてからnarファイルを作成する事もできます。</p>
					<ul>
						<li><a href="http://www.geocities.co.jp/SiliconValley-Cupertino/8536/tool/sodate.html" target="_blank">そだて</a>(<a href="http://code.google.com/p/satoriya-shiori/">IE7以降対応版</a>)</li>
						<li><a href="http://ms.shillest.net/#TOOL">ゴースト配布系自動化システム</a></li>
					</ul>
				</div>
				<div class="section">
					SSPではエクスプローラーのメニューから<em>updates2.dau</em>やnarファイルを作成できます。
				</div>
			</div>
			<div class="chapter">
				<div class="section">
					さらに詳しい説明は構成の説明の<a href="manual_install.html">Install</a>の項目にて。
				</div>
			</div>
		</div>
	</div>
	<div class="foot">
		<p class="disc2-author">
			管理人 : <a href="http://code.google.com/p/ukadoc/" target="_blank">UKADOC Project(文書内容)</a> / <a href="http://khmix.sakura.ne.jp/" target="_blank">緋龍華 麒麟(サイト)</a>
		</p>
		<p class="disc2-banner">
			<img src="image/ukadoc_banner1.png" width="200" height="40" alt="ukadocバナー">
		</p>
	</div>
</div>



</body>
</html>
<!--nobanner-->
