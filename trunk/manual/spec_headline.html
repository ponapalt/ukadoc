<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="robots" content="INDEX,FOLLOW">
<meta name="author" content="UKADOC Project">
<meta name="keywords" content="ukadoc,伺か">
<title>UKADOC Project HEADLINE/2.0</title>
<link rel="stylesheet" href="spec.css" />
<!--[if lt IE 9]><script src="html5shiv.js"></script><![endif]-->
</head>
<body>
	<h1 id="page-title">HEADLINE/2.0</h1>
	<nav class="menu-header">
		<table>
			<tbody>
				<tr>
					<th>トップページへ戻る</th>
					<td colspan="2">
						<ul>
							<li><a href="./index.html">INDEX</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="6">設定ファイル</th>
					<th>Ghost</th>
					<td>
						<ul>
							<li><a href="./descript_ghost.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Shell</th>
					<td>
						<ul>
							<li><a href="./descript_shell.html">descript.txt</a></li>
							<li><a href="./descript_shell_surfaces.html">surfaces.txt</a></li>
							<li><a href="./descript_shell_surfacetable.html">surfacetable.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Balloon</th>
					<td>
						<ul>
							<li><a href="./descript_balloon.html">descript.txt</a></li>
							<li><a href="./descript_balloon.html#balloonsoption">balloon(s/k)*s.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Plugin</th>
					<td>
						<ul>
							<li><a href="./descript_plugin.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Headline</th>
					<td>
						<ul>
							<li><a href="./descript_headline.html">descript.txt</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>Install</th>
					<td>
						<ul>
							<li><a href="./descript_install.html">install.txt</a></li>
							<li><a href="./descript_install.html#delete.txt">delete.txt</a></li>
							<li><a href="./descript_install.html#developer_options.txt">developer_options.txt</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="2">さくらスクリプト</th>
					<td colspan="2">
						<ul>
							<li><a href="./list_sakura_script.html">Sakura Script</a></li>
							<li><a href="./list_propertysystem.html">Property System</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="2">イベント</th>
					<th>SHIORI</th>
					<td>
						<ul>
							<li><a href="./list_shiori_event.html">SHIORI Event</a></li>
							<li><a href="./list_shiori_event_ex.html">SHIORI Event（外部）</a></li>
							<li><a href="./list_shiori_resource.html">SHIORI Resource</a></li>
						</ul>
					</td>
				</tr>
				<tr>
					<th>PLUGIN</th>
					<td>
						<ul>
							<li><a href="./list_plugin_event.html">PLUGIN Event</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
			<tbody>
				<tr>
					<th rowspan="2">規格</th>
					<td colspan="2">
						<ul>
							<li><span class="not-created">SHIORI/3.1</a></li>
							<li><a href="http://www.boreas.dti.ne.jp/~sdn/saori.html">SAORI/1.0</a>（外部サイト）</li>
							<li><a href="./spec_plugin.html">PLUGIN/2.0</a></li>
							<li><a href="./spec_headline.html">HEADLINE/2.0</a></li>
							<li><a href="./spec_dll.html">DLL</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
		</table>
	</nav>
	<section class="navigation-bar">
		<h1>HEADLINE/2.0</h1>
		<section class="navigation-category">
			<h1>HEADLINE/2.0</h1>
			<ul>
				<li><a href="#chapter0">前書</a></li>
				<li><a href="#chapter1">ヘッドラインの実体</a></li>
				<li><a href="#chapter2">DLL</a></li>
				<li><a href="#chapter3">request - response 1: version取得</a></li>
				<li><a href="#chapter4">request - response 2: ヘッドライン取得</a></li>
				<li><a href="#chapter5">desctipt.txt</a></li>
				<li><a href="#chapter6">補足</a></li>
			</ul>
		</section>
	</section>
	<div class="text">
		<div class="caption">
			<p>最終変更：<time>2013-08-07</time></p>
		</div>
		<div class="caption">
			<p>参考：<a href="http://usada.sakura.vg/contents/headlinesenser.html">HEADLINE/1.1</a>（外部サイト）</p>
		</div>
		<section id="chapter0">
			<h1>前書</h1>
			<p>HEADLINE/2.0は、旧来仕様（1.1）の改訂版です。現在SSPのみ実装。</p>
			<p>主な変更は文字コード指定の追加です。</p>
		</section>
		<section id="chapter1">
			<h1>ヘッドラインの実体</h1>
			<p>設定ファイル「descript.txt」とexecute 関数をエクスポートするdllファイルの2つが必要です。</p>
		</section>
		<section id="chapter2">
			<h1>DLL</h1>
			<p><a href="spec_dll.html">DLLのページ</a>を参照してください。</p>
		</section>
		<section id="chapter3">
			<h1>request - response 1: version取得</h1>
			<section>
				<h1>request例</h1>
<pre><code><!--
-->GET Version HEADLINE/2.0
Charset: UTF-8
Sender: SSP
</code></pre>
			</section>
			<section>
				<h1>requestヘッダ詳細</h1>
				<dl>
					<dt>Charset</dt>
					<dd>文字コード</dd>
					<dt>Sender</dt>
					<dd>イベント送信元</dd>
				</dl>
			</section>
			<section>
				<h1>response例</h1>
<pre><code><!--
-->HEADLINE/2.0 200 OK
Charset: UTF-8
Value: HeadlineModule 1.1
</code></pre>
			</section>
			<section>
				<h1>responseヘッダ詳細</h1>
				<dl>
					<dt>Charset</dt>
					<dd>[省略可]文字コード。省略した場合は呼び出し側指定のもの。</dd>
					<dt>Value</dt>
					<dd>[省略可]バージョン文字列</dd>
				</dl>
			</section>
		</section>
		<section id="chapter4">
			<h1>request - response 2: ヘッドライン取得</h1>
			<section>
				<h1>request例</h1>
<pre><code><!--
-->GET Headline HEADLINE/2.0
Charset: UTF-8
Sender: SSP
Option: url
Path: C:\SSP\temp\ad9326dc37cb86a9.html
</code></pre>
			</section>
			<section>
				<h1>requestヘッダ詳細</h1>
				<dl>
					<dt>Charset</dt>
					<dd>文字コード</dd>
					<dt>Sender</dt>
					<dd>イベント送信元</dd>
					<dt>Option</dt>
					<dd>[省略可]応答で解析可能なオプション。カンマ区切りで列挙。<br />現在urlのみ。responseのHeadlineヘッダの項参照。</dd>
					<dt>Path</dt>
					<dd>ヘッドライン解析対象ファイルパス（フルパス）。</dd>
				</dl>
			</section>
			<section>
				<h1>response例</h1>
<pre><code><!--
-->HEADLINE/2.0 200 OK
Charset: UTF-8
Headline: ほげほげ1
Headline: ほげほげ2
Headline: ほげほげ3
Headline: ほげほげ4
Headline: ほげほげ5
</code></pre>
			</section>
			<section>
				<h1>responseヘッダ詳細</h1>
				<dl>
					<dt>Charset</dt>
					<dd>[省略可]文字コード。省略した場合は呼び出し側指定のもの。</dd>
					<dt>RequestCharset</dt>
					<dd>[省略可]次の呼び出し時に希望する文字コード。省略した場合はCharset。</dd>
					<dt>Headline</dt>
					<dd>ヘッドラインの内容。<br />呼び出し時にOption: urlというふうに、Optionヘッダにurlが入っていた場合、URL拡張に対応しています。<br />その場合は、バイト値1区切りで、 内容[1]URL という形式で応答すると、ゴーストにURLも通知され、ゴースト側が対応していれば項目をクリックするとその詳細にジャンプ、等ができるかもしれません。<br />尚、返却するのはさくらスクリプトの断片ではなく、タグは使えません。単なるプレーンテキストを返却します。</dd>
				</dl>
			</section>
		</section>
		<section id="chapter5">
			<h1>descript.txt</h1>
			<p><a href="descript_headline.html">Headline設定のページ</a>を参照してください。</p>
		</section>
		<section id="chapter6">
			<h1>SHIORI Event</h1>
			<p>いずれも詳細は<a href="list_shiori_event.html">SHIORI Eventのページ</a>を参照してください。</p>
			<dl>
				<dt><a href="list_shiori_event.html#OnHeadlinesenseBegin">OnHeadlinesenseBegin</a></dt>
				<dd>ヘッドラインセンス開始時。</dd>
				<dt><a href="list_shiori_event.html#OnHeadlinesense.OnFind">OnHeadlinesense.OnFind</a></dt>
				<dd>読みあげる内容があった時。</dd>
				<dt><a href="list_shiori_event.html#OnHeadlinesenseComplete">OnHeadlinesenseComplete</a></dt>
				<dd>ヘッドラインセンス正常終了時。</dd>
				<dt><a href="list_shiori_event.html#OnHeadlinesenseFailure">OnHeadlinesenseFailure</a></dt>
				<dd>ヘッドラインセンス失敗時。</dd>
			</dl>
		</section>
		<section id="chapter7">
			<h1>補足</h1>
			<p>GET Headlineは2回呼ばれます。1回目は古いファイルに対して、2回目は新しいファイルに対してです。ただし古->新の順番は実装によっては順番が逆になる可能性がありますので、順番に依存するような処理は組んではいけません。</p>
			<p>デバッグ中など、常に表示したい場合（no updateにならない）は、descript.txtにalwaysdisplay,1と書いてみてください（デバッグ終了後に必ず消す事）。</p>
		</section>
	</div>
</body>
</html>